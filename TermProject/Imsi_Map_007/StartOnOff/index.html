<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./main.css">
    </head>
    <body>    
        <div id="root-window">
            <div id="render-target"></div>
                <div id="ui-toolbar" style="display: none;">
                    <button id="button-npc" class="ui-button" onclick="setActiveTool(event,'NPC')"> 
                        <img class="toolbar-icon" src="../../Imsi_Map_007/Model/ui_button_image/npc.png"> 
                    </button>
                    <button id='button-road' class="ui-button" onclick="setActiveTool(event,'road')"> 
                        <img class="toolbar-icon" src="../../Imsi_Map_007/Model/ui_button_image/road.png">
                    </button>
                    <button id="button-building" class="ui-button" onclick="setActiveTool(event,'building')"> 
                        <img class="toolbar-icon" src="../../Imsi_Map_007/Model/ui_button_image/building.png">
                     </button> 
                    <button id="button-house" class="ui-button" onclick="setActiveTool(event,'house')"> 
                        <img class="toolbar-icon" src="../../Imsi_Map_007/Model/ui_button_image/house.png">
                     </button>
                    <button id="button-station" class="ui-button" onclick="setActiveTool(event,'station')"> 
                        <img class="toolbar-icon" src="../../Imsi_Map_007/Model/ui_button_image/station.png">
                     </button>

                    <button id="button-station" class="ui-button" onclick="setActiveTool(event,'start')"> 
                        <img class="toolbar-icon" src="../../Imsi_Map_007/Model/ui_button_image/start.png">
                    </button>
                    <button id='button-remove' class="ui-button" onclick="setActiveTool(event,'remove')"> 
                        <img class="toolbar-icon" src="../../Imsi_Map_007/Model/ui_button_image/remove.png">
                     </button>
                    <button id="button-stop" class="ui-button" onclick="setActiveTool(event,'stop')"> 
                        <img class="toolbar-icon" src="../../Imsi_Map_007/Model/ui_button_image/stop.png"> 
                     </button>
                </div>
            </div>
        </div>

        <div id="start-panel">
            <button id="start-button" class="ui-button" onclick="setActiveTool(event,'start')"> 
                Start
            </button>
        </div>
          
        <div id="title-bar" style="display: none;">
        <div class="title-bar-left-items title-bar-items">
            &larr; Button
        </div>
        <div class="title-bar-center-items title-bar-items">
            My City
        </div>
        <div class="title-bar-right-items title-bar-items">
            Information &rarr;
        </div>
        </div>
        <div id="info-panel" class="container" style="display: none;">
        <div class="info-heading" style="margin-top: 0;">
            <span><img class="toolbar-icon" src="../../Imsi_Map_007/Model/ui_button_image/info.png"></span>
        </div>
        <div id="info-details" style="display: none;"> 
            <div id="building-info">
                <div>
                  <div style="font-weight: bold;">Building information:</div>
                  <div>building type: <span id="random-model-index">model index</span></div>
                  <div>X: <span id="x-coordinate">value</span>, Y: <span id="y-coordinate">value</span></div>
                </div>
            </div>
            <div id="house-info">
                <div style="font-weight: bold;">House Information:</div>
                <div>X: <span id="x-coordinate">value</span>, Y: <span id="y-coordinate">value</span></div>
            </div>
            <div id="npc-info">
                <div style="font-weight: bold;">Npc Information:</div>
                <div>X: <span id="x-coordinate">value</span>, Y: <span id="y-coordinate">value</span></div>
            </div>
            <div id="station-info">
                <div>
                  <div style="font-weight: bold;">Station information:</div>
                  <div>Station: <span id="station">number</span>, X: <span id="x-coordinate">value</span>, Y: <span id="y-coordinate">value</span></div>
                </div>
            </div>
        </div>
        </div>
        </div>



        <script type="module">
            import { createScene } from './src/scene.js';
            import { createCity } from './src/city.js';
            
            let selectedControl = document.getElementById('button-road');

            window.onload = () => {
                const city = createCity(30);
                const scene = createScene();  
            
                scene.initialize(city);
                scene.start();

                window.setActiveTool = (event, toolId) => {
                    if (selectedControl) {
                        selectedControl.classList.remove('selected');
                    }
                    selectedControl = event.target;
                    selectedControl.classList.add('selected');

                    scene.setActiveToolId(scene, toolId, city.size);
                }
            
                window.scene = scene;
                document.addEventListener('mousedown', scene.onMouseDown, false);
                document.addEventListener('mouseup', scene.onMouseUp, false);
                document.addEventListener('mousemove', scene.onMouseMove, false);
                document.addEventListener('contextmenu', (event) => event.preventDefault(), false);
                scene.start();                
            }
        </script>
    </body>
</html>